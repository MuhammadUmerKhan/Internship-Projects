# Database Folder

## Overview
The `database` folder stores logging outputs for the Real-Time AI Surveillance application. It contains two files that record tracking data and operational logs, essential for monitoring and debugging the application's performance.

## Files
- **`entries.csv`**:
  - **Purpose**: Logs unique track IDs of detected and confirmed individuals along with timestamps.
  - **Format**: CSV with columns `ID` (track ID) and `Timestamp` (date and time in `YYYY-MM-DD HH:MM:SS` format).
  - **Generated By**: `logger.py` in the `app` folder, which writes a new row for each unique track ID during video processing.
  - **Usage**: Use for auditing tracked objects, analyzing detection frequency, or integrating with external systems.
  - **Example Content**:
    ```
    ID,Timestamp
    1,2025-05-19 10:52:00
    2,2025-05-19 10:52:05
    ```

- **`app.log`**:
  - **Purpose**: Records operational logs, including initialization, frame processing, errors, and stream status.
  - **Format**: Text file with entries in the format `YYYY-MM-DD HH:MM:SS [LEVEL] MODULE: MESSAGE` (e.g., `[INFO] streamlit: Stream initialized`).
  - **Generated By**: All modules (`run.py`, `main.py`, `camera.py`, `detector.py`, `tracker.py`, `logger.py`, `utils.py`) using Pythonâ€™s logging module.
  - **Usage**: Debug issues (e.g., camera failures, detection errors) or monitor application runtime behavior.
  - **Example Content**:
    ```
    2025-05-19 10:52:00,000 [INFO] streamlit: Stream initialized.
    2025-05-19 10:52:00,100 [INFO] camera: Successfully opened camera at index 1
    2025-05-19 10:52:00,200 [ERROR] camera: Error capturing frame: OpenCV error
    ```

## Usage
- **Accessing Logs**:
  - Open `entries.csv` in a spreadsheet or text editor to review tracked IDs and timestamps.
  - View `app.log` in a text editor to diagnose errors or monitor operations.
- **Monitoring**:
  - Check `entries.csv` for tracking activity during a session.
  - Use `app.log` to troubleshoot issues like camera initialization failures or detection errors.
- **Maintenance**:
  - Periodically archive or clear `app.log` to manage file size, as it grows with debug-level logging.
  - `entries.csv` only logs unique track IDs, so it grows slowly but can be archived if needed.
  - Ensure the `database` folder has write permissions for the application user.

## Configuration
- **Location**: The folder is referenced in `run.py`, `main.py`, and `logger.py` with paths like `database/entries.csv` and `database/app.log`.
- **Permissions**: Ensure the application has write access:
  ```bash
  chmod -R u+w database/
  ```
- **Customization**:
  - Modify logging level in `run.py` or `main.py` (e.g., change `level=logging.INFO` to `logging.DEBUG` for more details).
  - Update `logger.py` to change the CSV format or add additional fields.

## Troubleshooting
- **Empty or Missing Files**:
  - Verify the application ran successfully (`streamlit run run.py` or `python main.py`).
  - Check `app.log` for errors like permission issues or camera failures.
  - Ensure the `database` folder exists before running the app:
    ```bash
    mkdir -p database
    ```
- **Large Log Files**:
  - Rotate or truncate `app.log` manually or use a log rotation tool.
  - Example to clear:
    ```bash
    > database/app.log
    ```
- **Camera Errors**:
  - If `app.log` shows camera initialization errors (e.g., `No camera could be opened`), check camera index:
    ```bash
    ls /dev/video*
    ```
    Update `device_index` in `run.py` or `main.py`.